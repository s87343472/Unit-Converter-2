# 单位转换器产品需求文档 (PRD)

## 版本历史

| 版本号 | 日期       | 变更内容                                     | 作者   |
| :----- | :--------- | :------------------------------------------- | :----- |
| v0.2.6 | 2024-01-22 | 添加语言路由需求                             | Claude |
| v0.2.5 | 2024-01-22 | 更新多语言支持方案                           | Claude |
| v0.2.4 | 2024-01-21 | 整合专业功能模块，完善转换类目                 | Claude |
| v0.2.0 | 2024-01-21 | 添加详细的页面开发计划和组件规范               | Claude |
| v0.1.0 | 2024-01-20 | 初始版本：基础功能规划                       | Claude |

## 1. 产品概述

### 1.1 产品定位

在线单位转换工具，提供准确、便捷的单位换算服务，支持基础单位转换和专业领域计算。

### 1.2 目标用户

*   学生和教育工作者
*   工程技术人员
*   日常生活用户
*   国际贸易从业者
*   专业领域工作者（汽车、建筑、摄影等）

### 1.3 核心价值

*   **准确性:**  提供精确的转换结果。
*   **便捷性:**  简单直观的操作界面。
*   **全面性:**  支持多种单位类型转换。
*   **教育性:**  提供转换原理和应用场景说明。
*   **专业性:**  支持各行业专业计算需求。

## 2. 功能规格

### 2.1 基础转换功能

1. 长度单位转换
    - 支持单位：
      - 公制：米(m)、千米(km)、厘米(cm)、毫米(mm)
      - 英制：英寸(in)、英尺(ft)、码(yd)、英里(mi)
    - 功能特性：
      - 实时自动计算转换结果
      - 支持复制带单位的转换结果
      - 支持粘贴带单位的数值自动提取
    - 交互规范：
      - 输入限制：
        - 最大支持20位数字（含小数点）
        - 最大支持10位小数
        - 自动过滤非数字字符
      - 错误提示：
        - 输入非法字符时显示提示
        - 超出长度限制时显示提示
        - 输入框聚焦时显示输入规则
      - 单位选择：
        - 选中单位高亮显示
        - 悬停效果
        - 显示单位符号和名称
      - 结果展示：
        - 实时更新转换结果
        - 点击结果可复制
        - 复制时显示成功提示
        - 悬停时显示"点击复制"提示
    - 数值处理：
      - 科学计数法：
        - 超大数值(>=1e15)自动使用科学计数法
        - 超小数值(<1e-10)自动使用科学计数法
      - 小数位处理：
        - 动态调整小数位数（最多10位）
        - 去除末尾多余的0
      - 输入处理：
        - 自动过滤非法字符
        - 智能提取粘贴文本中的数值
    - 页面布局：
      - 布局结构：
        - 顶部：功能区域（输入和结果）
        - 底部：使用说明和FAQ
      - 响应式设计：
        - 桌面端：双列布局
        - 移动端：单列布局
      - 视觉层次：
        - 重要信息突出显示
        - 辅助信息降低存在感

2. 重量单位转换
3. 温度单位转换
4. 面积单位转换
5. 体积单位转换
6. 速度单位转换
7. 压力单位转换
8. 能量单位转换
9. 数据存储单位转换

### 2.2 专业计算功能

#### 2.2.1 几何计算

1. **面积计算**
    *   基础形状：
        *   圆形 (输入：半径；输出：面积)
        *   矩形 (输入：长、宽；输出：面积)
        *   三角形 (输入：底、高；输出：面积)
        *   平行四边形 (输入：底、高；输出：面积)
        *   梯形 (输入：上底、下底、高；输出：面积)
    *   复杂形状：支持通过将复杂形状分解成多个简单形状的方式计算面积。

2. **体积计算**
    *   基础形状：
        *   立方体 (输入：边长；输出：体积)
        *   长方体 (输入：长、宽、高；输出：体积)
        *   球体 (输入：半径；输出：体积)
        *   圆柱体 (输入：半径、高；输出：体积)
        *   圆锥体 (输入：半径、高；输出：体积)
    *   特殊应用：
        *   储罐容积计算 (根据不同形状的储罐，例如圆柱形、球形、锥形等，输入相应的参数，计算容积)
        *   谷物仓容积计算 (例如圆锥形谷物仓，输入底部半径、高度，计算容积)

3. **表面积计算**
    *   基础形状：
        *   立方体 (输入：边长；输出：表面积)
        *   长方体 (输入：长、宽、高；输出：表面积)
        *   球体 (输入：半径；输出：表面积)
        *   圆柱体 (输入：半径、高；输出：侧面积、总表面积)
        *   圆锥体 (输入：半径、母线长；输出：侧面积、总表面积)
    *   特殊应用：
        *   管道表面积计算 (例如圆柱形管道，输入半径、长度，计算侧面积)
        *   截锥体表面积计算 (输入上底半径、下底半径、母线长，计算侧面积)

#### 2.2.2 行业专用

1. **汽车相关**
    *   油耗计算：输入行驶距离和消耗的燃油量，计算百公里油耗。
    *   马力计算：输入扭矩和转速，计算马力。
    *   轮胎尺寸转换：例如将 225/45R17 转换为其他表示方式。
    *   汽油机油混合比：根据不同的混合比例，例如 50:1，计算需要添加的汽油和机油量。

2. **工业测量**
    *   金属板材规格：提供常用金属板材的规格数据，例如厚度、宽度、长度等。
    *   线规：提供不同线规标准 (例如 AWG、SWG) 的线径数据。
    *   网格尺寸：提供不同网格尺寸的目数和孔径数据。

3. **其他专业计算**
    *   辐射衰减：根据辐射源的强度、距离和材料的衰减系数，计算辐射剂量。
    *   频率波长转换：根据频率或波长，计算对应的波长或频率。
    *   地图坐标转换：例如将经纬度坐标转换为 UTM 坐标。
    *   卷轴尺寸计算：根据纸张的厚度、卷轴的内径和外径，计算纸张的长度。

### 2.3 用户界面

*   响应式设计，支持移动端和桌面端
*   清晰的导航系统
*   直观的输入界面
*   详细的说明信息

### 2.4 多语言支持

#### 2.4.1 语言路由规范

1. **默认语言处理**
   - 首页访问时不添加语言后缀（如：`/`）
   - 默认使用英语作为显示语言
   - 保持 URL 简洁性

2. **语言切换机制**
   - 只在用户主动选择语言时添加语言后缀
   - 通过 URL 参数触发语言切换（如：`/?lang=zh`）
   - 切换后重定向到带语言的路径（如：`/zh/`）

3. **URL 结构**
   - 根路径：`/`（默认英语）
   - 带语言路径：`/{lang}/`（如：`/zh/`、`/fr/`）
   - 子页面路径：`/{lang}/{page}`（如：`/zh/length`）

4. **语言持久化**
   - 记住用户的语言选择
   - 支持直接访问带语言的 URL
   - 保持语言选择状态一致性

5. **SEO 优化**
   - 为每种语言版本提供独立的 URL
   - 实现适当的语言标记
   - 添加语言切换的 meta 标签

### 2.5 首页设计

#### 2.5.1 布局结构

1. **顶部导航栏**
   - 左侧：Logo 和产品名称
   - 右侧：语言切换器
   - 响应式设计，移动端显示汉堡菜单

2. **主要内容区**
   - 转换类型卡片网格布局
   - 每行显示 3-4 个卡片（根据屏幕宽度自适应）
   - 卡片间距保持一致
   - 支持响应式布局

3. **转换类型卡片**
   - 统一的卡片尺寸和样式
   - 包含图标、标题和简短描述
   - 鼠标悬停效果
   - 点击整个卡片可跳转
   - 支持键盘导航

#### 2.5.2 视觉设计

1. **配色方案**
   - 主色调：#3B82F6（蓝色）
   - 背景色：#F3F4F6（浅灰）
   - 卡片背景：白色
   - 文字颜色：深灰/黑色
   - 强调色：#2563EB（深蓝）

2. **图标设计**
   - 使用线性图标
   - 统一的图标尺寸
   - 保持风格一致性
   - 图标颜色与主题协调

3. **排版规范**
   - 标题：18-24px
   - 描述文本：14-16px
   - 使用 Inter 字体
   - 合适的行高和字间距

#### 2.5.3 交互设计

1. **卡片交互**
   - 鼠标悬停时轻微上浮
   - 点击时有反馈效果
   - 支持键盘 Tab 键导航
   - 焦点状态有明显指示

2. **响应式行为**
   - 桌面端：每行 4 个卡片
   - 平板端：每行 3 个卡片
   - 移动端：每行 1-2 个卡片
   - 平滑的布局切换

3. **加载优化**
   - 图标懒加载
   - 页面切换动画
   - 加载状态提示
   - 平滑的过渡效果

#### 2.5.4 性能要求

1. **加载速度**
   - 首屏加载时间 < 1.5s
   - 图标加载时间 < 500ms
   - 页面切换时间 < 300ms

2. **优化措施**
   - 使用静态生成
   - 图标使用 SVG
   - 实现组件懒加载
   - 优化资源加载

### 2.6 单位转换页面规范

#### 2.6.1 页面结构

1. **顶部区域**
   - 导航栏高度：60px
   - 面包屑导航
   - 页面标题
   - 简短描述

2. **主要内容区**
   - 最大宽度：1280px
   - 左右两栏布局
   - 标准内边距：24px
   - 响应式设计

3. **底部区域**
   - 使用说明
   - 单位换算知识
   - 常见问题解答
   - 相关链接

#### 2.6.2 左侧输入区域

1. **数值输入**
   - 输入框高度：48px
   - 圆角：6px
   - 边框样式：1px solid
   - 聚焦状态样式
   - 错误状态样式

2. **单位选择**
   - 列表项高度：40px
   - 悬停背景色变化
   - 选中状态高亮
   - 单位符号对齐
   - 支持键盘导航

3. **交互规范**
   - 实时数值验证
   - 自动过滤非法字符
   - 支持科学计数法
   - 智能处理粘贴内容
   - 清晰的错误提示

#### 2.6.3 右侧结果区域

1. **结果列表**
   - 列表项高度：40px
   - 单位名称和符号布局
   - 数值右对齐
   - 支持一键复制
   - 复制成功动画

2. **数值展示**
   - 保证10位有效数字
   - 自动科学计数法
   - 动态小数位数
   - 对齐方式统一
   - 超长数字格式化

3. **交互反馈**
   - 悬停效果
   - 点击复制提示
   - 错误状态显示
   - 加载状态指示
   - 动画过渡效果

#### 2.6.4 响应式设计

1. **桌面端 (>= 1024px)**
   - 保持双列布局
   - 完整功能展示
   - 固定导航栏
   - 优化空间利用

2. **平板端 (>= 768px)**
   - 可切换单列布局
   - 折叠次要信息
   - 优化触摸区域
   - 调整字体大小

3. **移动端 (< 768px)**
   - 采用单列布局
   - 简化功能显示
   - 增大触摸区域
   - 调整内容间距

#### 2.6.5 性能要求

1. **加载优化**
   - 组件懒加载
   - 预加载关键资源
   - 优化首屏加载
   - 资源压缩

2. **渲染优化**
   - 使用虚拟列表
   - 避免重复渲染
   - 优化动画性能
   - 减少布局抖动

3. **状态管理**
   - 合理使用缓存
   - 优化更新频率
   - 减少不必要计算
   - 状态持久化

#### 2.6.6 错误处理

1. **输入验证**
   - 实时验证反馈
   - 清晰的错误提示
   - 引导性的修正建议
   - 防止无效输入

2. **异常处理**
   - 网络错误提示
   - 计算错误处理
   - 优雅降级方案
   - 恢复机制

3. **边界情况**
   - 处理极大/极小值
   - 处理特殊字符
   - 处理空值状态
   - 处理溢出情况

## 3. 开发计划

### 3.1 开发阶段

#### 第一阶段：基础转换（v0.2.4 - v0.3.0）

*   完成基础转换类目中的长度、重量、温度单位转换
*   实现多语言支持 (中文、英文、德文、法文、日文、俄文)
*   开发核心组件 (`UnitConverter`, `LanguageSwitcher`, `QuickAccess`等)
*   优化交互：采用首页直接提供转换功能 + 左侧导航 + 右侧功能区的布局，并实现无刷新切换单位类型。

#### 第二阶段：科学计算（v0.3.0 - v0.4.0）

*   完成基础转换类目中的面积、体积、速度单位转换
*   开始几何计算功能开发 (面积、体积、表面积计算)
*   增强用户体验组件 (`UnitSelector`, `CategoryNav`)

#### 第三阶段：专业领域（v0.4.0 - v0.5.0）

*   完成基础转换类目中的压力、能量单位转换
*   开发汽车相关和工业测量功能
*   优化性能和 SEO

#### 第四阶段：完善功能（v0.5.0 - v1.0.0）

*   完成所有专业计算功能
*   系统测试和性能优化
*   文档完善和用户指南

### 3.2 页面组件规范

#### 必需组件

1. 面包屑导航 (Breadcrumb)
2. 单位输入框 (UnitInput)
3. 转换说明卡片 (ConversionInfo)
4. 专业计算组件
5. 可视化展示组件

## 4. 技术要求

### 4.1 前端技术栈

*   Next.js 15.1.4+
*   React 18+
*   TypeScript
*   Tailwind CSS

### 4.2 性能要求

*   页面加载时间 < 2s
*   转换响应时间 < 100ms
*   移动端适配良好

### 4.3 浏览器支持

*   Chrome 最新版
*   Firefox 最新版
*   Safari 最新版
*   Edge 最新版

## 5. 测试计划

### 5.1 功能测试

*   基础转换功能测试
*   专业计算功能测试
*   边界条件测试

### 5.2 性能测试

*   页面加载性能
*   计算性能
*   并发处理能力

### 5.3 用户体验测试

*   界面易用性测试
*   响应式设计测试
*   多语言支持测试

## 6. 维护计划

### 6.1 日常维护

*   监控系统性能
*   处理用户反馈
*   修复发现的问题

### 6.2 功能迭代

*   定期添加新的转换功能
*   优化计算公式和算法
*   更新专业领域功能

### 6.3 文档更新

*   更新用户指南
*   维护 API 文档
*   更新开发文档

## 7. 用户故事

*   "作为一名学生，我希望能够使用这个工具进行作业中的单位换算，例如长度、重量、温度等。"
*   "作为一名工程师，我希望能够使用这个工具进行工程计算，例如计算几何形状的面积、体积和表面积。"
*   "作为一名汽车爱好者，我希望能够使用这个工具计算油耗、马力和转换轮胎尺寸。"
*   "作为一名经常需要进行国际贸易的人员，我希望能够使用这个工具快速地转换不同的单位。"
*   "作为一名科研人员，我希望能够使用这个工具进行辐射剂量计算和频率波长转换。"

## 8. 验收标准

*   所有单位转换功能都需要有明确的输入和输出。
*   计算结果需要精确到指定的小数位数 (例如，默认保留 2 位小数)。
*   需要能够处理错误的输入，例如非数字输入、负数输入等。
*   需要提供清晰的错误提示信息。
*   专业计算功能需要根据行业标准和实际应用场景进行设计。
*   用户界面需要简洁易用，能够方便地进行单位选择和转换操作。
*   需要支持多语言切换 (中文、英文)。
*   页面加载时间需要小于 2 秒，单位转换响应时间需要小于 100 毫秒。

## 9. 多语言支持

*   使用 Next.js 的国际化 (i18n) 路由功能实现多语言支持。
*   采用 **subpath routing** 策略，即在 URL 路径中添加语言代码来区分不同语言版本的页面 (例如：`example.com/en/about`, `example.com/zh/about`)。
*   支持的语言：英语 (en)、中文 (zh)。
*   默认语言：英语 (en)。
*   语言文件存储在 `public/locales` 目录下，按语言和命名空间 (namespace) 分类。
*   使用 `LanguageProvider` 组件提供当前语言环境和加载语言文件的方法。
*   使用 `useTranslation` Hook 在组件中获取当前语言和翻译文本。

---